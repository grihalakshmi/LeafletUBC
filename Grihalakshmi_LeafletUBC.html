<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Leaflet UBC by Grihalakshmi</title>
	<!--External Stylesets, using a hosted version of leftlet with subresource integrity enabled. See https://leafletjs.com/download.html -->
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
  integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
  crossorigin=""/>	

	<!-- Adding the Leaflet JavaScript Library -->
	<script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
  integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
  crossorigin=""></script>

  <!-- adding the JQuery-->
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

</head>
<body>

	<div id="map" style="width: 600px; height: 400px"></div>


<script> 
	// Create variable to hold map element, give initial settings to map
	var map = L.map('map',{ center: [49.262109, -123.243029], zoom: 14}); 

	// Add OpenStreetMap tile layer to map element
	L.tileLayer('https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}{r}.png', { attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors' }).addTo(map);

	/* Add OpenStreetMap tile layer to map element. I tried this style first, as backup in case the black & white one didn't work. But it did! YAY!
	L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', { attribution: 'Basemap data: &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, <a href="http://viewfinderpanoramas.org">SRTM</a> | Basemap style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)' }).addTo(map); */

/* var ParkingLotMarkers = {
    	radius: 3,
    	fillColor: "#907820",
    	color: "#000",
    	weight: 2,
    	opacity: 0,
    	fillOpacity: 0
		};

function onEachParkingLot(feature, layer) {
       // does this tree have a property named TAXA?
       if (fac_description) {
          layer.bindTooltip(fac_description);
       }
    } 

$.getJSON("https://raw.githubusercontent.com/UBCGeodata/ubcv-parking/master/geojson/ubcv_parking_www.geojson",
              function(data){
    						// Once UBC parking lots GeoJSON layer is loaded
      					// Then add it to the map 
    						L.geoJSON(data, {
   								  pointToLayer: function (feature, latlng) {
        							               return L.circleMarker(
                                       latlng,
                                       ParkingLotMarkers
                                     );
    							                },
                    onEachFeature: onEachParkingLot
                  }
                ).addTo(map);}); */

      /*load GeoJSON from an external file
$.getJSON("https://raw.githubusercontent.com/UBCGeodata/ubcv-parking/master/geojson/ubcv_parking_www.geojson",function(data){
    // add GeoJSON layer to the map once the file is loaded
    L.geoJson(data).addTo(map);
}); */

/* THIS IS THE ORIGINAL WORKING ONE
 // load GeoJSON from an external file
$.getJSON("https://raw.githubusercontent.com/UBCGeodata/ubcv-parking/master/geojson/ubcv_parking_www.geojson",function(data){
    L.geoJson(data, {
    	onEachFeature: function (feature, layer) {
    		layer.bindPopup(feature.properties.FAC_DESCRIPTION);
    	}
    }).addTo(map);
}); */

/*
var ParkingLotMarker = {
    	radius: 6,
    	fillColor: "#904010",
    	color: "#555453",
    	weight: 2,
    	opacity: 1,
    	fillOpacity: 1
		};
    
    function onEachLot(feature, layer) {
        layer.bindPopup(feature.properties.FAC_DESCRIPTION);
       }
    
		$.getJSON("https://raw.githubusercontent.com/UBCGeodata/ubcv-parking/master/geojson/ubcv_parking_www.geojson",
              function(data){
    						L.geoJSON(data, {
   								  pointToLayer: function (feature, latlng) {
        							               return L.circleMarker(
                                       latlng,
                                       ParkingLotMarker
                                     );
    							                },
                    onEachFeature: onEachLot
                  }
                ).addTo(map);
    		}); */
    
    /* var ParkingLotPoly = {
    	fillColor: "#904010",
    	color: "#555453",
    	weight: 2,
    	opacity: 1,
    	fillOpacity: 1
		}; */

	/* function onEachBuilding(feature, layer) {
        layer.bindPopup(feature.properties.PLACENAME);
       }

		$.getJSON("https://raw.githubusercontent.com/UBCGeodata/ubcv-buildings/master/geojson/ubcv_buildings.geojson",
			function(data){
					    L.geoJson(data, {
					    	pointToLayer: function (feature, latlng) {
					    					return L.polygon(latlng, ParkingLotPoly
					    		);
					    						},
		    }).addTo(map);
		}); */

$.getJSON("https://raw.githubusercontent.com/UBCGeodata/ubcv-buildings/master/geojson/ubcv_buildings.geojson",function(data){
    L.geoJson(data, {
    	onEachFeature: function (feature, layer) {
    		layer.bindPopup(feature.properties.PLACENAME);
    	}
    }).addTo(map);
});


var ParkingLotMarker = {
    	radius: 6,
    	fillColor: "#904010",
    	color: "#555453",
    	weight: 2,
    	opacity: 1,
    	fillOpacity: 1
		};
    
    function onEachLot(feature, layer) {
        layer.bindPopup(feature.properties.FAC_DESCRIPTION);
       }
   
		$.getJSON("https://raw.githubusercontent.com/UBCGeodata/ubcv-parking/master/geojson/ubcv_parking_www.geojson",
              function(data){
    						L.geoJSON(data, {
   								  pointToLayer: function (feature, latlng) {
        							               return L.circleMarker(
                                       latlng,
                                       ParkingLotMarker
                                     );
    							                },
                    onEachFeature: onEachLot
                  }
                ).addTo(map);
    		});



</script>

</body>
</html>